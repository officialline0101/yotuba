<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ </title>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* å³ç«¯ã®ç´°ã„ãƒŠãƒ“ï¼ˆå›ºå®šï¼‰ */
        .side-nav {
            position: fixed;
            right: -5px;
            top: 80%;
            transform: translateY(-50%) translateX(10px);
            background: #94c509;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 4px;
            border-radius: 10px 0 0 10px;
            z-index: 1000;
            width: 35px;
        }

        .side-nav a {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            font-size: 10px;
            margin: 5px 0;
            padding: 5px;
            transition: background 0.3s, transform 0.2s;
            border-radius: 5px;
            width: 30px;
            height: 30px;
            text-align: center;
        }

        .side-nav a span {
            font-size: 24px;
            position: absolute;
            left: 2px;
            top: 13px;
        }

        /* ã‚¹ãƒãƒ›ç”¨ã®å¾®èª¿æ•´ */
        @media (max-width: 600px) {
            .side-nav {
                right: 2px;
                width: 30px;
            }
            .side-nav a {
                width: 28px;
                height: 28px;
            }
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            padding-top: 5px;
            padding-bottom: 50px;
            overflow-x: hidden;
        }

        .container {
            background-color: #fdfdfd;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 96%;
            max-width: 500px;
            padding: 25px;
            box-sizing: border-box;
            margin: 0 auto;
            position: relative;
        }

        /* ã‚¿ã‚¤ãƒˆãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆã‚ˆã¤ã°ï¼†éš ã‚ŒçŒ«ï¼‰ */
        h1 {
            background: linear-gradient(135deg, #94c509, #7aaddb); /* ã‚ˆã¤ã°ã®ã‚¯ãƒ­ãƒ¼ãƒãƒ¼ã£ã½ã„çˆ½ã‚„ã‹ã• */
            background: #94c509;
            color: white;
            padding: 20px;
            border-radius: 0 0px 0px 0px;
            text-align: center;
            display: block;
            margin: -20px -15px 20px -15px;
            font-size: 26px;
            font-weight: 100;
            box-shadow: inset 0 -5px 10px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        /* éš ã‚ŒçŒ«ã®è‚‰çƒ */
        .cat-paw-hidden {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 40px;
            color: rgba(255, 255, 255, 0.2); /* è–„ãè¡¨ç¤ºã—ã¦éš ã‚Œã‚­ãƒ£ãƒ©æ„Ÿ */
            transform: rotate(20deg);
        }

        /* ã‚ˆã¤ã°ã‚¤ãƒ¡ãƒ¼ã‚¸ã®è£…é£¾ï¼ˆCSSã§ã‚¯ãƒ­ãƒ¼ãƒãƒ¼ã£ã½ãï¼‰ */
        h1::before {
            content: 'ğŸ€';
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 30px;
            opacity: 0.8;
        }

        .label, .labelkibounitizi, .labeltyuuou, .labelmessezi {
            display: block;
            margin-bottom: 10px;
            padding: 5px;
            font-weight: 400;
            background-color: #94c509;
            color: #ffffff;
            font-size: 18px;
            text-align: center;
            position: relative;
            border-top: 1px solid black;
            border-bottom: 1px solid black;
        }

        .labelkibounitizi {
            margin: 10px 0;
            line-height: 1.2;
        }

        .labelmessezi {
            margin-top: 20px;
        }

        /* å¿…é ˆãƒãƒ¼ã‚¯ */
        .required {
            color: #ffffff;
            font-weight: lighter;
            font-size: 0.6em;
            margin-left: 5px;
            vertical-align: 0.3em;
            background-color: rgb(255, 15, 15);
            padding: 1px 5px;
            border-radius: 3px;
        }
        
        /* ä»»æ„ãƒãƒ¼ã‚¯ */
        .optional {
            color: #555;
            font-weight: lighter;
            font-size: 0.6em;
            margin-left: 5px;
            vertical-align: 0.3em;
            background-color: #eee;
            padding: 1px 5px;
            border-radius: 3px;
            border: 1px solid #ccc;
        }

        input[type="text"],
        input[type="tel"],
        textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #555555;
            border-radius: 3px;
            box-sizing: border-box;
            font-size: 16px;
            transition: all 0.3s;
        }

        input:focus, textarea:focus {
            border-color: #94c509;
            outline: none;
            box-shadow: 0 0 8px rgba(148, 197, 9, 0.3);
        }

        /* ãƒœã‚¿ãƒ³å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
        .visit-buttons,
        .symptoms,
        .irradiations {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        /* ç—‡çŠ¶ãƒœã‚¿ãƒ³ç­‰ã¯ç¸¦ä¸¦ã³ã«ã™ã‚‹ãŸã‚block */
        .symptoms, .irradiations {
            display: block; 
        }

        .visit-buttons button,
        .symptoms button,
        .irradiations button {
            width: 100%; /* åŸºæœ¬ç¸¦ä¸¦ã³ */
            padding: 12px;
            border: 1px solid #2e2e2e;
            border-radius: 4px;
            background-color: #f7f7f7;
            cursor: pointer;
            box-sizing: border-box;
            text-align: center;
            font-size: 16px;
            margin-bottom: 8px; /* ãƒœã‚¿ãƒ³é–“ã®ä½™ç™½ */
            transition: all 0.3s;
        }

        .visit-buttons {
            display: flex; /* æ¥åº—å›æ•°ã¯æ¨ªä¸¦ã³ */
            flex-direction: row;
        }
        
        .visit-buttons button {
            flex: 1;
            margin-bottom: 0;
        }

        .visit-buttons button.active,
        .symptoms button.active,
        .irradiations button.active {
            background-color: #ffffff;
            color: #000000;
            outline: 2px solid #94c509;
            font-weight: bold;
            position: relative;
        }
        
        /* é¸æŠæ™‚ã®çŒ«è€³ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼ˆéš ã‚Œè¦ç´ ï¼‰ */
        .symptoms button.active::after {
            content: 'ğŸ¾';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #94c509;
            font-size: 14px;
        }

        .submit-button {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 4px;
            background-color: #94c509;
            color: #fff;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .submit-button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* èª¬æ˜æ›¸ãã‚¨ãƒªã‚¢ */
        #treatment-text {
            background-color: #f0f7e1; /* è–„ã„ç·‘ */
            padding: 15px;
            border: 1px solid #94c509;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            display: none;
            position: relative;
        }
        /* å¹ãå‡ºã—ã®ä¸‰è§’ */
        #treatment-text::before {
            content: "";
            position: absolute;
            top: -10px;
            left: 50%;
            margin-left: -10px;
            border-width: 0 10px 10px 10px;
            border-style: solid;
            border-color: transparent transparent #94c509 transparent;
        }

        /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é–¢é€£ */
        .calendar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            width: 100%;
        }
        .calendar {
            width: 100%;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .calendar table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }
        .calendar th, .calendar td {
            text-align: center;
            padding: 8px 2px;
            border: 1px solid #eee;
            font-size: 12px;
            cursor: pointer;
        }
        .calendar th {
            background-color: #f9f9f9;
            font-weight: normal;
        }
        .calendar td.available {
            color: #94c509; /* ä¸¸ã®è‰² */
            font-weight: bold;
            font-size: 1.2em;
        }
        .calendar td.unavailable {
            background-color: #f0f0f0;
            color: #ccc;
            pointer-events: none;
        }
        .calendar td.selected {
            background-color: #94c509;
            color: white;
        }
        
        .month-button-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 10px;
            align-items: center;
        }
        .current-month {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        /* æ—¥æ™‚é¸æŠã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .datetime-wrapper {
            margin-bottom: 15px;
        }
        .dt-grid {
            display: flex;
            gap: 10px;
        }
        .datetime-input {
            width: 50%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: white;
            font-size: 16px;
        }
        .placeholder {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: #666;
        }

        /* ç¢ºèªç”»é¢ */
        #displayInfo {
            background: #fff;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 5px 0;
            font-size: 14px;
        }
        .edit-button {
            background: #fff;
            border: 1px solid #333;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            cursor: pointer;
        }
        .edit-button:hover {
            background: #94c509;
            color: white;
            border-color: #94c509;
        }
        hr {
            border: 0;
            border-top: 1px solid #eee;
            margin: 5px 0;
        }

        /* ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢ï¼ˆåˆæœŸéè¡¨ç¤ºï¼‰ */
        #options-container {
            display: none;
            margin-top: 10px;
            background-color: #fafafa;
            padding: 10px;
            border-radius: 5px;
            border: 1px dashed #94c509;
        }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading-spinner {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            z-index: 9999;
            background: rgba(0,0,0,0.7);
            padding: 20px;
            border-radius: 10px;
            color: white;
            text-align: center;
        }
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #94c509;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    </style>
</head>

<body>
    <div class="side-nav" id="sideNav">
        <a href="#section-message">
            <span>â‡©</span>
            <i class="fas fa-cat"></i>
        </a>
    </div>

    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
        <div class="loading-text">Loading...</div>
    </div>

    <div class="container">
        <h1>
            <span class="small-text">ã‚ˆã¤ã°ã‚«ã‚¤ãƒ­æ•´ä½“é™¢</span><br>
            äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ 
            <i class="fas fa-paw cat-paw-hidden"></i>
        </h1>

        <div class="label">ãŠå®¢æ§˜å<span class="required">å¿…é ˆ</span></div>
        <input type="text" id="name" placeholder="ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" oninput="saveInput('name')">

        <div class="label">é›»è©±ç•ªå·<span class="required">å¿…é ˆ</span></div>
        <input type="tel" id="phone" placeholder="é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" oninput="saveInput('phone')">

        <div class="label">ã”æ¥åº—å›æ•°<span class="required">å¿…é ˆ</span></div>
        <div class="visit-buttons">
            <button type="button" id="firstVisit" onclick="selectVisit(this)">1å›ç›®</button>
            <button type="button" id="repeatVisit" onclick="selectVisit(this)">2å›ç›®ä»¥é™</button>
        </div>

        <div class="label">ãŠèº«ä½“ã®ãŠæ‚©ã¿<span class="optional">ä»»æ„</span></div>
        <textarea id="physicalConcerns" rows="3" placeholder="è‚©ã“ã‚Šã€è…°ç—›ãªã©ã€æ°—ã«ãªã‚‹ç—‡çŠ¶ãŒã‚ã‚Œã°ã”è¨˜å…¥ãã ã•ã„" oninput="saveInput('physicalConcerns')"></textarea>

        <div class="label" id="course">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãŠé¸ã³ãã ã•ã„<span class="required">å¿…é ˆ</span></div>
        
        <div class="symptoms">
            <button type="button" onclick="selectSymptom(this, 'Standard')" data-price="4000">â‘ æ¨™æº–ã‚³ãƒ¼ã‚¹ 40åˆ†</button>
            <button type="button" onclick="selectSymptom(this, 'Posture')" data-price="4000">â‘¡å§¿å‹¢çŸ¯æ­£ã‚³ãƒ¼ã‚¹ 60åˆ†</button>
            <button type="button" onclick="selectSymptom(this, 'OLeg')" data-price="5000">â‘¢Oè„šçŸ¯æ­£ã‚³ãƒ¼ã‚¹ 60åˆ†</button>
            <button type="button" onclick="selectSymptom(this, 'Partial')" data-price="2000">â‘£éƒ¨åˆ†ã‚³ãƒ¼ã‚¹ 20åˆ†</button>
        </div>

        <div id="treatment-text"></div>

        <div id="options-container">
            <div class="label" style="font-size: 16px; background-color: #7aaddb;">ã€æ¨™æº–ã‚³ãƒ¼ã‚¹é™å®šã€‘ã‚ªãƒ—ã‚·ãƒ§ãƒ³</div>
            <div class="irradiations">
                <button type="button" id="optScalp" onclick="selectOption(this)" data-price="1200">â‘ é ­çš®ãƒãƒƒã‚µãƒ¼ã‚¸ 15åˆ† (+1,200å††)</button>
                <button type="button" id="optAdd10" onclick="selectOption(this)" data-price="700">â‘¡è¿½åŠ 10åˆ† (+700å††)</button>
                <button type="button" id="optAdd20" onclick="selectOption(this)" data-price="1400">â‘¢è¿½åŠ 20åˆ† (+1,400å††)</button>
            </div>
        </div>

        <div class="labelkibounitizi">å¸Œæœ›æ—¥æ™‚<span class="required">å¿…é ˆ</span></div>
        <div class="datetime-wrapper" style="text-align: center;">
            <span class="placeholder" id="placeholder1">â‡©ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®â—¯ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã‹ã€ä¸‹ã‹ã‚‰é¸æŠâ‡©</span>
            <input type="hidden" id="date1" name="date1">
            <div class="dt-grid">
                <select id="date1_day" class="datetime-input" aria-label="æ—¥ä»˜ã‚’é¸æŠ"></select>
                <select id="date1_time" class="datetime-input" aria-label="æ™‚é–“"></select>
            </div>
        </div>

        <div class="labelkibounitizi">ç¬¬äºŒå¸Œæœ›æ—¥æ™‚<span class="required">å¿…é ˆ</span></div>
        <div class="datetime-wrapper" style="text-align: center;">
            <input type="hidden" id="date2" name="date2">
            <div class="dt-grid">
                <select id="date2_day" class="datetime-input" aria-label="æ—¥ä»˜ã‚’é¸æŠ"></select>
                <select id="date2_time" class="datetime-input" aria-label="æ™‚é–“"></select>
            </div>
        </div>

        <div class="labelkibounitizi">ç¬¬ä¸‰å¸Œæœ›æ—¥æ™‚<span class="required">å¿…é ˆ</span></div>
        <div class="datetime-wrapper" style="text-align: center;">
            <input type="hidden" id="date3" name="date3">
            <div class="dt-grid">
                <select id="date3_day" class="datetime-input" aria-label="æ—¥ä»˜ã‚’é¸æŠ"></select>
                <select id="date3_time" class="datetime-input" aria-label="æ™‚é–“"></select>
            </div>
        </div>

        <div class="labelmessezi">ãã®ä»–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
        <textarea id="message" rows="2" placeholder="ã”è³ªå•ç­‰ã‚ã‚Œã°ã“ã¡ã‚‰ã¸"></textarea>

        <div class="labeltyuuou">ã”äºˆç´„å†…å®¹ç¢ºèª</div>
        <div id="displayInfo"></div> 

        <button class="submit-button" onclick="submitForm()" id="section-message">äºˆç´„ã‚’è¡Œã†</button>
    </div>

    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let visitCount = '';
        let selectedMenu = '';
        let selectedSymptom = []; 
        let selectedOptionList = []; // ã‚ªãƒ—ã‚·ãƒ§ãƒ³é…åˆ—
        let selectedFullDate = '';
        let currentDate = new Date();
        let availabilityCache = {};
        
        // æ–™é‡‘è¨ˆç®—ç”¨
        let totalAmount = 0;
        let menuPrice = 0;
        let optionsPrice = 0;

        // æ™‚é–“è¨ˆç®—ç”¨ (å˜ä½: åˆ†)
        let selectedMenuTime = 0;
        let selectedOptionTime = 0;
        let selectedVisitTime = 0;

        // è¨­å®šï¼šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã”ã¨ã®æ‰€è¦æ™‚é–“ï¼ˆæ–½è¡“ï¼‹ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°ã®åˆè¨ˆï¼‰
        const menuTimes = {
            'â‘ æ¨™æº–ã‚³ãƒ¼ã‚¹ 40åˆ†': 60,      // æ–½è¡“40+ã‚«ã‚¦20
            'â‘¡å§¿å‹¢çŸ¯æ­£ã‚³ãƒ¼ã‚¹ 60åˆ†': 75,  // æ–½è¡“60+ã‚«ã‚¦15
            'â‘¢Oè„šçŸ¯æ­£ã‚³ãƒ¼ã‚¹ 60åˆ†': 75,   // æ–½è¡“60+ã‚«ã‚¦15
            'â‘£éƒ¨åˆ†ã‚³ãƒ¼ã‚¹ 20åˆ†': 30       // æ–½è¡“20+ã‚«ã‚¦10
        };

        // è¨­å®šï¼šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã”ã¨ã®æ‰€è¦æ™‚é–“
        const optionTimes = {
            'â‘ é ­çš®ãƒãƒƒã‚µãƒ¼ã‚¸ 15åˆ† (+1,200å††)': 15,
            'â‘¡è¿½åŠ 10åˆ† (+700å††)': 10,
            'â‘¢è¿½åŠ 20åˆ† (+1,400å††)': 20
        };

        // è¨­å®šï¼šæ¥åº—å›æ•°ã«ã‚ˆã‚‹åŠ ç®—æ™‚é–“ï¼ˆä»Šå›ã¯ç‰¹ã«ãªã„å ´åˆã¯0ã§OKï¼‰
        const visitTimes = {
            '1å›ç›®': 0, // å¿…è¦ãªã‚‰å¤‰æ›´
            '2å›ç›®ä»¥é™': 0
        };

        // LIFFåˆæœŸåŒ– & åˆæœŸãƒ­ãƒ¼ãƒ‰
        document.addEventListener('DOMContentLoaded', function () {
            liff.init({
                liffId: '2008592714-4wJPN2by'
            }).then(() => {
                console.log('LIFF OK');
            }).catch((err) => {
                console.log('LIFF Error', err);
            });

            // åˆæœŸã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ­ãƒ¼ãƒ‰
            fetchAvailability(currentDate);
            
            // å…¥åŠ›å¾©å…ƒ
            restoreInput('name');
            restoreInput('phone');
            restoreInput('physicalConcerns');

            // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³åˆæœŸåŒ–
            ['date1', 'date2', 'date3'].forEach(id => initPicker(id, 60));
            
            // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼åˆæœŸéè¡¨ç¤º
            document.querySelector('.calendar-container').style.display = 'none';
        });

        function restoreInput(id) {
            const val = localStorage.getItem(id);
            if(val) document.getElementById(id).value = val;
        }

        function saveInput(id) {
            const value = document.getElementById(id).value;
            localStorage.setItem(id, value);
            updateDisplayInfo();
        }

        // ---------------------------------------------------------
        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠãƒ­ã‚¸ãƒƒã‚¯
        // ---------------------------------------------------------
        function selectSymptom(button, menuId) {
            // ä»–ã®ãƒœã‚¿ãƒ³ã®activeè§£é™¤
            document.querySelectorAll('.symptoms button').forEach(btn => btn.classList.remove('active'));
            
            // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒœã‚¿ãƒ³ã‚’activeã«
            button.classList.add('active');
            
            // ãƒ‡ãƒ¼ã‚¿å–å¾—
            selectedMenu = button.textContent.trim();
            menuPrice = parseInt(button.getAttribute('data-price'), 10);
            selectedMenuTime = menuTimes[selectedMenu] || 60;

            // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒªã‚»ãƒƒãƒˆï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼åˆ‡ã‚Šæ›¿ãˆæ™‚ï¼‰
            resetOptions();

            // è©³ç´°ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º & ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¡¨ç¤ºåˆ¶å¾¡
            const textDiv = document.getElementById('treatment-text');
            const optionContainer = document.getElementById('options-container');
            
            let html = '';
            
            // ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¡¨ç¤ºãƒ•ãƒ©ã‚°
            let showOptions = false;

            if (menuId === 'Standard') {
                html = `
                    <strong>ã€è©³ç´°ã€‘</strong><br>
                    æ‰€è¦æ™‚é–“ï¼š60åˆ†ï¼ˆæ–½è¡“40åˆ†ï¼‹ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°20åˆ†ï¼‰<br>
                    è‚©ã“ã‚Šã€è…°ç—›ã€é ­ç—›ã€é¦–ç—›ã€è†ç—›ã€å…¨èº«ã®ç–²ã‚Œã€èƒŒä¸­ã®ç—›ã¿ãªã©ä¸»ã ã£ãŸä½“ã®ä¸èª¿ã‚’æ”¹å–„ã—ã¦ã„ãã¾ã™ã€‚<br>
                    <span style="color:#e74c3c;">æ–™é‡‘ï¼š4,000å††</span>
                `;
                showOptions = true;
            } else if (menuId === 'Posture') {
                html = `
                    <strong>ã€è©³ç´°ã€‘</strong><br>
                    æ‰€è¦æ™‚é–“ï¼š75åˆ†ï¼ˆæ–½è¡“60åˆ†ï¼‹ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°15åˆ†ï¼‰<br>
                    ç«‹ã¡å§¿ãŒæ°—ã«ãªã‚‹ã€ç¾ã—ã„å§¿å‹¢ã«ãªã‚ŠãŸã„ã¨å¸Œæœ›ã™ã‚‹æ–¹ã¸ã€‚<br>
                    <span style="color:red; font-weight:bold;">â€»é‹å‹•ç™‚æ³•ã‚’ç”¨ã„ãŸæ–½è¡“ã«ãªã‚Šã¾ã™ã®ã§è¦šæ‚Ÿã—ã¦æ¥ã¦ãã ã•ã„ã€‚</span><br>
                    <span style="color:#e74c3c;">æ–™é‡‘ï¼š4,000å††</span>
                `;
            } else if (menuId === 'OLeg') {
                html = `
                    <strong>ã€è©³ç´°ã€‘</strong><br>
                    æ‰€è¦æ™‚é–“ï¼š75åˆ†ï¼ˆæ–½è¡“60åˆ†ï¼‹ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°15åˆ†ï¼‰<br>
                    è„šã®çŠ¶æ…‹ã‚’ãƒ’ã‚¢ãƒªãƒ³ã‚°ï¼†è¦–è¨ºå¾Œãƒ‰ãƒ­ãƒƒãƒ—ãƒ™ãƒƒãƒ‰ã‚’ä½¿ã„ã€æ–½è¡“ã€‚<br>
                    ãã®å¾Œæ—¥å¸¸ç”Ÿæ´»ã§æ°—ã‚’ä»˜ã‘ã‚‹ã“ã¨ã€ã‚„ã£ã¦ã»ã—ã„ã“ã¨ã‚’æŒ‡å°ã€‚<br>
                    <span style="color:red; font-weight:bold;">â€»é‹å‹•ç™‚æ³•ã‚’ç”¨ã„ãŸæ–½è¡“ã«ãªã‚Šã¾ã™ã®ã§è¦šæ‚Ÿã—ã¦æ¥ã¦ãã ã•ã„ã€‚</span><br>
                    <span style="color:#e74c3c;">æ–™é‡‘ï¼š5,000å††</span>
                `;
            } else if (menuId === 'Partial') {
                html = `
                    <strong>ã€è©³ç´°ã€‘</strong><br>
                    æ‰€è¦æ™‚é–“ï¼š30åˆ†ï¼ˆæ–½è¡“20åˆ†ï¼‹ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°10åˆ†ï¼‰<br>
                    é¦–ã®ä¸èª¿ã€æ‰‹è¶³ã®ã¿ãªã©éƒ¨åˆ†çš„ãªæ–½è¡“ã‚’çŸ­æ™‚é–“ã§è¡Œã„ã¾ã™ã€‚<br>
                    â€»1ç®‡æ‰€ã®ã¿ã®æ–½è¡“ã¨ãªã‚Šã¾ã™ã€‚<br>
                    <span style="color:#e74c3c;">æ–™é‡‘ï¼š2,000å††</span>
                `;
            }

            textDiv.innerHTML = html;
            textDiv.style.display = 'block';

            // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢ã®è¡¨ç¤ºåˆ‡æ›¿
            if (showOptions) {
                optionContainer.style.display = 'block';
            } else {
                optionContainer.style.display = 'none';
            }

            // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å†è¨ˆç®—ï¼†è¡¨ç¤ºæ›´æ–°
            document.querySelector('.calendar-container').style.display = 'block';
            fetchAvailability(currentDate);
            updateDisplayInfo();
        }

        // ---------------------------------------------------------
        // ã‚ªãƒ—ã‚·ãƒ§ãƒ³é¸æŠãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰
        // ---------------------------------------------------------
        function selectOption(button) {
            button.classList.toggle('active');
            
            // é›†è¨ˆ
            calculateOptions();
            
            fetchAvailability(currentDate);
            updateDisplayInfo();
        }

        function calculateOptions() {
            const activeBtns = document.querySelectorAll('.irradiations button.active');
            selectedOptionList = [];
            optionsPrice = 0;
            selectedOptionTime = 0;

            activeBtns.forEach(btn => {
                const name = btn.textContent.trim();
                const price = parseInt(btn.getAttribute('data-price'), 10);
                
                selectedOptionList.push(name);
                optionsPrice += price;
                selectedOptionTime += (optionTimes[name] || 0);
            });
        }

        function resetOptions() {
            document.querySelectorAll('.irradiations button').forEach(btn => btn.classList.remove('active'));
            selectedOptionList = [];
            optionsPrice = 0;
            selectedOptionTime = 0;
        }

        // ---------------------------------------------------------
        // æ¥åº—å›æ•°é¸æŠ
        // ---------------------------------------------------------
        function selectVisit(button) {
            document.querySelectorAll('.visit-buttons button').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            visitCount = button.textContent;
            selectedVisitTime = visitTimes[visitCount] || 0;
            
            fetchAvailability(currentDate);
            updateDisplayInfo();
        }

        // ---------------------------------------------------------
        // è¡¨ç¤ºæ›´æ–° (ç¢ºèªç”»é¢)
        // ---------------------------------------------------------
        function updateDisplayInfo() {
            const name = document.getElementById('name').value;
            const concerns = document.getElementById('physicalConcerns').value; // ãŠæ‚©ã¿
            
            const visitText = visitCount ? visitCount : 'æœªé¸æŠ';
            const menuText = selectedMenu ? selectedMenu : 'æœªé¸æŠ';
            
            // ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¡¨ç¤º
            let optionHtml = 'ãªã—';
            if (selectedOptionList.length > 0) {
                optionHtml = selectedOptionList.join('<br>ãƒ»');
            }

            // åˆè¨ˆæ™‚é–“
            const totalMin = selectedMenuTime + selectedOptionTime + selectedVisitTime;
            const hours = Math.floor(totalMin / 60);
            const mins = totalMin % 60;
            const timeText = (hours > 0 ? `${hours}æ™‚é–“` : '') + `${mins}åˆ†`;

            // åˆè¨ˆé‡‘é¡
            const totalYen = menuPrice + optionsPrice;

            // æ—¥æ™‚
            const d1 = formatDateTime(document.getElementById('date1').value);
            const d2 = formatDateTime(document.getElementById('date2').value);
            const d3 = formatDateTime(document.getElementById('date3').value);

            const displayDiv = document.getElementById('displayInfo');
            displayDiv.innerHTML = `
                <div class="info-row"><strong>ãŠåå‰ï¼š</strong><span>${name}</span></div>
                <div class="info-row"><strong>æ¥åº—å›æ•°ï¼š</strong><span>${visitText}</span></div>
                <hr>
                <div class="info-row"><strong>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼š</strong><span>${menuText}</span></div>
                <div class="info-row" style="align-items:flex-start;"><strong>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼š</strong><span>${optionHtml}</span></div>
                <div class="info-row"><strong>æ‰€è¦æ™‚é–“ï¼š</strong><span>${timeText}</span></div>
                <div class="info-row" style="color:#e74c3c; font-size:1.1em;"><strong>åˆè¨ˆé‡‘é¡ï¼š</strong><span>${totalYen.toLocaleString()}å††</span></div>
                <hr>
                <div class="info-row"><strong>ç¬¬1å¸Œæœ›ï¼š</strong><span>${d1}</span></div>
                <div class="info-row"><strong>ç¬¬2å¸Œæœ›ï¼š</strong><span>${d2}</span></div>
                <div class="info-row"><strong>ç¬¬3å¸Œæœ›ï¼š</strong><span>${d3}</span></div>
                <hr>
                <div class="info-row" style="display:block;"><strong>ãŠæ‚©ã¿ï¼š</strong><br><span style="font-size:0.9em; color:#555;">${concerns || 'ãªã—'}</span></div>
            `;
        }

        // ---------------------------------------------------------
        // é€ä¿¡å‡¦ç†
        // ---------------------------------------------------------
        function submitForm() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const concerns = document.getElementById('physicalConcerns').value;
            const message = document.getElementById('message').value;
            const d1 = document.getElementById('date1').value;

            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if(!name) return alert('ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
            if(!phone) return alert('é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
            if(!visitCount) return alert('æ¥åº—å›æ•°ã‚’é¸æŠã—ã¦ãã ã•ã„');
            if(!selectedMenu) return alert('ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„');
            if(!d1) return alert('ç¬¬ä¸€å¸Œæœ›æ—¥æ™‚ã¯å¿…é ˆã§ã™');

            // é€ä¿¡ãƒ†ã‚­ã‚¹ãƒˆä½œæˆ
            const totalYen = menuPrice + optionsPrice;
            const optionText = selectedOptionList.length > 0 ? selectedOptionList.join(', ') : 'ãªã—';

            const text = `ã€äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ã€‘
ã€ŠãŠåå‰ã€‹${name}
ã€Šé›»è©±ç•ªå·ã€‹${phone}
ã€Šæ¥åº—å›æ•°ã€‹${visitCount}

ã€Šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€‹
${selectedMenu}
ã€Šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‹
${optionText}
ã€Šåˆè¨ˆé‡‘é¡ã€‹
${totalYen.toLocaleString()}å††

ã€ŠãŠæ‚©ã¿ã€‹
${concerns}

ã€å¸Œæœ›æ—¥æ™‚ã€‘
ç¬¬ä¸€ï¼š${formatDateTime(d1)}
ç¬¬äºŒï¼š${formatDateTime(document.getElementById('date2').value)}
ç¬¬ä¸‰ï¼š${formatDateTime(document.getElementById('date3').value)}

ã€Šãã®ä»–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‹
${message}`;

            if (!liff.isInClient()) {
                alert('LINEã‚¢ãƒ—ãƒªå†…ã§é–‹ã„ã¦ãã ã•ã„ã€‚\n\n--é€ä¿¡å†…å®¹--\n' + text);
                return;
            }

            liff.sendMessages([{
                type: 'text',
                text: text
            }]).then(() => {
                alert('äºˆç´„å†…å®¹ã‚’é€ä¿¡ã—ã¾ã—ãŸï¼');
                liff.closeWindow();
            }).catch((err) => {
                alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                console.error(err);
            });
        }

        // ---------------------------------------------------------
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ & ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ (æ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯æµç”¨)
        // ---------------------------------------------------------
        function formatDateTime(isoStr) {
            if(!isoStr) return 'æœªé¸æŠ';
            const date = new Date(isoStr);
            if(isNaN(date.getTime())) return 'æœªé¸æŠ';
            
            const m = date.getMonth() + 1;
            const d = date.getDate();
            const w = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'][date.getDay()];
            const hh = ('0' + date.getHours()).slice(-2);
            const mm = ('0' + date.getMinutes()).slice(-2);
            return `${m}/${d}(${w}) ${hh}:${mm}`;
        }

        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆGASé€£æºï¼‰
        // â€»Google Apps Scriptã®URLã¯ã”è‡ªèº«ã®ã‚‚ã®ã‚’ã”ä½¿ç”¨ãã ã•ã„
        const GAS_URL = 'https://script.google.com/macros/s/AKfycbwCoOmA44deifnwIwAsO7V1Uny7svUWedyJ-57v0JEuw_keFeFiYxI2O_9-H4r8-dy6/exec';

        async function fetchAvailability(date) {
            if(!selectedMenu) return; // ãƒ¡ãƒ‹ãƒ¥ãƒ¼æœªé¸æŠãªã‚‰ãƒ­ãƒ¼ãƒ‰ã—ãªã„

            showLoading();
            const start = new Date(date);
            const end = new Date(date);
            end.setDate(end.getDate() + 7);

            const url = `${GAS_URL}?startTime=${start.toISOString()}&endTime=${end.toISOString()}`;
            
            try {
                const res = await fetch(url);
                const data = await res.json();
                
                // å–¶æ¥­æ—¥ãƒ‡ãƒ¼ã‚¿æŠ½å‡º
                const businessDays = data.filter(e => e.summary === 'å–¶æ¥­æ—¥').map(e => ({
                    start: new Date(e.startTime),
                    end: new Date(e.endTime)
                }));
                
                renderCalendar(data, businessDays);
            } catch(e) {
                console.error(e);
            } finally {
                hideLoading();
            }
        }

        function renderCalendar(events, businessDays) {
            const tbody = document.querySelector('#calendar1 tbody');
            tbody.innerHTML = ''; // ã‚¯ãƒªã‚¢
            
            updateCalendarHeader(currentDate);

            // æ™‚é–“æ  (30åˆ†åˆ»ã¿)
            const times = [];
            for(let h=9; h<=18; h++) { // 9:00 - 18:00
                times.push(`${('0'+h).slice(-2)}:00`);
                if(h!==18) times.push(`${('0'+h).slice(-2)}:30`);
            }

            times.forEach(time => {
                const tr = document.createElement('tr');
                const th = document.createElement('td'); // æ™‚é–“ãƒ©ãƒ™ãƒ«
                th.textContent = time;
                th.style.background = '#f9f9f9';
                tr.appendChild(th);

                // 7æ—¥åˆ†ãƒ«ãƒ¼ãƒ—
                for(let i=0; i<7; i++) {
                    const cellDate = new Date(currentDate);
                    cellDate.setDate(cellDate.getDate() + i);
                    
                    // ã‚»ãƒ«ã®æ—¥æ™‚ã‚»ãƒƒãƒˆ
                    const [hh, mm] = time.split(':').map(Number);
                    cellDate.setHours(hh, mm, 0, 0);

                    const td = document.createElement('td');
                    
                    // å¯å¦åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
                    const status = checkAvailability(cellDate, events, businessDays);
                    
                    if(status === 'OK') {
                        td.textContent = 'â—¯';
                        td.className = 'available';
                        td.onclick = () => selectCalendarCell(td, cellDate);
                    } else {
                        td.textContent = 'âœ•';
                        td.className = 'unavailable';
                    }
                    
                    tr.appendChild(td);
                }
                tbody.appendChild(tr);
            });
        }

        function checkAvailability(slotStart, events, businessDays) {
            // ç¾åœ¨æ™‚åˆ»ã‚ˆã‚Šå‰ã¯NG
            if(slotStart < new Date()) return 'NG';

            // æ‰€è¦æ™‚é–“åˆè¨ˆ
            const duration = selectedMenuTime + selectedOptionTime + selectedVisitTime;
            const slotEnd = new Date(slotStart.getTime() + duration * 60000);

            // çµ‚äº†ãŒæ—¥ã‚’è·¨ãã€ã¾ãŸã¯18:30ã‚’è¶…ãˆã‚‹å ´åˆã¯NG (æœ€çµ‚å—ä»˜è€ƒæ…®)
            // ä¾‹: 18:00é–‹å§‹ã§60åˆ†ã‚³ãƒ¼ã‚¹â†’19:00çµ‚äº†ã¯NGã¨ã™ã‚‹å ´åˆãªã©
            // ã“ã“ã§ã¯ç°¡æ˜“çš„ã«ã€Œçµ‚äº†æ™‚é–“ãŒ19:00ã‚’è¶…ãˆã‚‹ãªã‚‰NGã€ã¨ã—ã¾ã™
            if(slotEnd.getHours() >= 19 && slotEnd.getMinutes() > 0) return 'NG';

            // 1. å–¶æ¥­æ—¥æ å†…ã«å…¥ã£ã¦ã„ã‚‹ã‹ï¼Ÿ
            let isBusiness = false;
            for(let b of businessDays) {
                if(slotStart >= b.start && slotEnd <= b.end) {
                    isBusiness = true;
                    break;
                }
            }
            if(!isBusiness) return 'NG'; // å–¶æ¥­æ—¥æ å¤–

            // 2. æ—¢å­˜äºˆç´„ã¨è¢«ã£ã¦ã„ãªã„ã‹ï¼Ÿ
            // GASã‹ã‚‰ã¯ã€Œå–¶æ¥­æ—¥ã€ä»¥å¤–ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒã€Œäºˆç´„æ¸ˆã¿ã€ã¨ã—ã¦è¿”ã£ã¦ãã‚‹ã¨ä»®å®š
            for(let e of events) {
                if(e.summary === 'å–¶æ¥­æ—¥') continue;
                const eStart = new Date(e.startTime);
                const eEnd = new Date(e.endTime);

                // é‡ãªã‚Šåˆ¤å®š
                if(slotStart < eEnd && slotEnd > eStart) {
                    return 'NG'; // è¢«ã£ã¦ã‚‹
                }
            }

            return 'OK';
        }

        function updateCalendarHeader(date) {
            const ths = document.querySelectorAll('#calendar-header th');
            // ths[0]ã¯ã€Œæ™‚é–“ã€ãªã®ã§ã‚¹ã‚­ãƒƒãƒ—ã€1~7ãŒæ—¥ä»˜
            const wd = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'];
            
            for(let i=0; i<7; i++) {
                const d = new Date(date);
                d.setDate(d.getDate() + i);
                const m = d.getMonth()+1;
                const day = d.getDate();
                const w = d.getDay();
                
                const th = ths[i+1];
                th.innerHTML = `${m}/${day}<br>(${wd[w]})`;
                
                if(w===0) th.style.color = 'red';
                else if(w===6) th.style.color = 'blue';
                else th.style.color = '#333';
            }

            document.getElementById('currentMonth').textContent = `${date.getFullYear()}å¹´${date.getMonth()+1}æœˆ`;
        }

        function nextmonth() { currentDate.setMonth(currentDate.getMonth()+1); currentDate.setDate(1); fetchAvailability(currentDate); }
        function previousmonth() { currentDate.setMonth(currentDate.getMonth()-1); currentDate.setDate(1); fetchAvailability(currentDate); }
        function nextWeek() { currentDate.setDate(currentDate.getDate()+7); fetchAvailability(currentDate); }
        function previousWeek() { currentDate.setDate(currentDate.getDate()-7); fetchAvailability(currentDate); }

        function selectCalendarCell(td, dateObj) {
            document.querySelectorAll('.calendar td').forEach(c => c.classList.remove('selected'));
            td.classList.add('selected');

            // ãƒ•ã‚©ãƒ¼ãƒ ã¸ã®åæ˜ ï¼ˆç¬¬ä¸€å¸Œæœ›ã«å…¥ã‚Œã‚‹ï¼‰
            const isoDay = dateObj.getFullYear() + '-' + ('0'+(dateObj.getMonth()+1)).slice(-2) + '-' + ('0'+dateObj.getDate()).slice(-2);
            const isoTime = ('0'+dateObj.getHours()).slice(-2) + ':' + ('0'+dateObj.getMinutes()).slice(-2);
            
            // date1ã«ã‚»ãƒƒãƒˆ
            setPickerValue('date1', isoDay, isoTime);
            updateDisplayInfo();
            
            // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ä¸Šéƒ¨ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('date1').scrollIntoView({behavior: 'smooth', block: 'center'});
        }

        // æ—¥æ™‚ãƒ”ãƒƒã‚«ãƒ¼é–¢é€£ï¼ˆæ‰‹å‹•é¸æŠç”¨ï¼‰
        function initPicker(id, days) {
            const daySel = document.getElementById(id + '_day');
            const timeSel = document.getElementById(id + '_time');
            
            // æ—¥ä»˜ç”Ÿæˆ
            const d = new Date();
            daySel.innerHTML = '<option value="">æ—¥ä»˜ã‚’é¸æŠ</option>';
            for(let i=0; i<days; i++) {
                const val = d.getFullYear() + '-' + ('0'+(d.getMonth()+1)).slice(-2) + '-' + ('0'+d.getDate()).slice(-2);
                const text = `${d.getMonth()+1}/${d.getDate()}(${['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'][d.getDay()]})`;
                const opt = document.createElement('option');
                opt.value = val;
                opt.text = text;
                daySel.appendChild(opt);
                d.setDate(d.getDate()+1);
            }

            // æ™‚é–“ç”Ÿæˆ
            timeSel.innerHTML = '<option value="">æ™‚é–“</option>';
            for(let h=9; h<=18; h++) {
                const t1 = ('0'+h).slice(-2) + ':00';
                const t2 = ('0'+h).slice(-2) + ':30';
                timeSel.add(new Option(t1, t1));
                if(h!==18) timeSel.add(new Option(t2, t2));
            }

            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            const updateHidden = () => {
                const day = daySel.value;
                const time = timeSel.value;
                const hidden = document.getElementById(id);
                const placeholder = document.getElementById('placeholder' + id.slice(-1));
                
                if(day && time) {
                    hidden.value = `${day}T${time}`;
                    if(placeholder) placeholder.style.display = 'none';
                } else {
                    hidden.value = '';
                }
                updateDisplayInfo();
            };

            daySel.addEventListener('change', updateHidden);
            timeSel.addEventListener('change', updateHidden);
        }

        function setPickerValue(id, day, time) {
            const daySel = document.getElementById(id + '_day');
            const timeSel = document.getElementById(id + '_time');
            daySel.value = day;
            timeSel.value = time;
            
            // hiddenæ›´æ–°
            const hidden = document.getElementById(id);
            const placeholder = document.getElementById('placeholder' + id.slice(-1));
            hidden.value = `${day}T${time}`;
            if(placeholder) placeholder.style.display = 'none';
        }

        function showLoading() { document.getElementById('loadingSpinner').style.display = 'block'; }
        function hideLoading() { document.getElementById('loadingSpinner').style.display = 'none'; }

    </script>
</body>
</html>
